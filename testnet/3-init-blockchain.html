



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Initializing Blockchain</title>

    <!-- CSS -->
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href='../_static/main.css' rel='stylesheet'>
    <link href='../_static/style.css' rel='stylesheet'>
    <link href='../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <script type="text/javascript" src="searchindex.js.html"></script>
    <!-- Transifex -->
    <script type="text/javascript">
      window.liveSettings = {
        api_key: "bbf87af0641e4bbf89c98088d48e0449",
      };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>

    <!-- title card -->
    <link  href='../_static/title-card.css' rel='stylesheet'>
    <script src='../_static/script.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene Technical Documentation  documentation"
          href="../_static/opensearch.xml.html"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 
<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="3-init-blockchain.html" />

<link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = 'testnet/3-init-blockchain' 		
READTHEDOCS_DATA['source_suffix'] = '.rst'
</script>

<script type="text/javascript" src="../_static/readthedocs-dynamic-include.js"></script>

<!-- end RTD <extrahead> -->
</head>
 <body class='no-literate'>


 <div class='title-area title-card' style='background-image: url("https://bitshares.org/images/bg.jpg")'>
   <div class='in'>
     <div class='headline'>
       <h1>Initializing Blockchain</h1>
 
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left navlinks'>
    
        <div class="prev">
         <div class="title">previous</div>
         <span><a href="2-genesis.html">Genesis Configuration</a></span>
        </div>
        <div class="top">
         <div class="title">top</div>
         <span><a class="uplink" href="../index.html">Contents</a></span>
        </div>
        <div class="next">
         <div class="title">next</div>
         <span><a href="4-cli-wallet.html">Connecting a CLI wallet</a></span>
        </div>

   </div>
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <a href="../index.html"><img src="../_static/grphn-logo.svg" height="48" /></a>
    <a href="../bitshares/index.html"><img src="../_static/bitshares-logo.png" height="48" /></a>
    <a href="../muse/index.html"><img src="../_static/MUSE_logo_transp_v1.png" height="48" /></a>
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../bitshares/index.html">BitShares 2.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../muse/index.html">MUSE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/index.html">Integration Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Testnets</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="public-testnet-howto.html">Public Testnet Howto</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1-install.html">Installation/Confguration of Witness</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-genesis.html">Genesis Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="3-init-blockchain.html#">Initializing Blockchain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="3-init-blockchain.html#initializing-the-genesis-block">Initializing the genesis block</a></li>
<li class="toctree-l4"><a class="reference internal" href="3-init-blockchain.html#setting-up-block-production">Setting up block production</a><ul>
<li class="toctree-l5"><a class="reference internal" href="3-init-blockchain.html#embedding-the-genesis-block-optional">Embedding the Genesis block (optional)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="4-cli-wallet.html">Connecting a CLI wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-committee.html">Establishing a Committee</a></li>
<li class="toctree-l3"><a class="reference internal" href="6-webwallet.html">Web Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="7-faucet.html">Setting up the Faucet</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-nginx.html">Nginx Webserver</a></li>
<li class="toctree-l3"><a class="reference internal" href="9-python-library.html">Installation of Python Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="10-create-assets.html">Create MPAs/UIAs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="private-testnet.html">Private Testnet Howto</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../meta/index.html">How to Contribute</a></li>
</ul>

    </div>
   </div>
   <div class="search section">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   </div>
   <div class='bottom section'>
    <p class="centered">
     This page is proudly presented by <br />
     <a href="http://chainsquad.com">ChainSquad GmbH</a>
    </p>
    <p class="centered">
     <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
    </p>
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="initializing-blockchain">
<h1>Initializing Blockchain<a class="headerlink" href="3-init-blockchain.html#initializing-blockchain" title="Permalink to this headline">¶</a></h1>
<div class="section" id="initializing-the-genesis-block">
<h2>Initializing the genesis block<a class="headerlink" href="3-init-blockchain.html#initializing-the-genesis-block" title="Permalink to this headline">¶</a></h2>
<p>We initialize the blockchain an generate our first blocks.</p>
<p>The <code class="docutils literal"><span class="pre">--enable-stale-production</span></code> flag tells the <code class="docutils literal"><span class="pre">witness_node</span></code> to
produce on a chain with zero blocks or very old blocks.  We specify the
<code class="docutils literal"><span class="pre">--enable-stale-production</span></code> parameter on the command line as we will
not normally need it (although it can also be specified in the config
file).</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>programs/witness_node/witness_node --genesis-json genesis.json <span class="se">\</span>
                                   --enable-stale-production <span class="se">\</span>
                                   --data-dir data/testnet
</pre></div>
</div>
<p>We will already see our chain id::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Started</span> <span class="n">witness</span> <span class="n">node</span> <span class="n">on</span> <span class="n">a</span> <span class="n">chain</span> <span class="k">with</span> <span class="mi">0</span> <span class="n">blocks</span><span class="o">.</span>
<span class="n">Chain</span> <span class="n">ID</span> <span class="ow">is</span> <span class="n">cf307110d029cb882d126bf0488dc4864772f68d9888d86b458d16e6c36aa74b</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If other witness produces blocks and witness participation is
high enough, subsequent runs which connect to an existing
witness node over the p2p network, or which get blockchain
state from an existing data directory, need not have the
<code class="docutils literal"><span class="pre">--enable-stale-production</span></code> flag.</p>
</div>
</div>
<div class="section" id="setting-up-block-production">
<h2>Setting up block production<a class="headerlink" href="3-init-blockchain.html#setting-up-block-production" title="Permalink to this headline">¶</a></h2>
<p>Let’s create a very basic configuration file in <cite>data/testnet/config.ini</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ mkdir -p data/testnet
$ vim data/testnet/config.ini
</pre></div>
</div>
<p>All we put into the configuration file is the ids and the keys for the
witnesses so that we can start producing blocks</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.1&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.2&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.3&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.4&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.5&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.6&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.7&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.8&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.9&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.10&quot;</span>
<span class="c1"># For each witness, add pubkey and private key:</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;GPH6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;</span><span class="p">,</span><span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">pubkey</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">privkey</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This authorizes the <code class="docutils literal"><span class="pre">witness_node</span></code> to produce blocks on behalf of the
listed <code class="docutils literal"><span class="pre">witness-id</span></code>’s, and specifies the private key needed to sign
those blocks.  Normally each witness would be on a different node, but
for the purposes of this testnet, we will start out with all witnesses
signing blocks on a single node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The setting <code class="docutils literal"><span class="pre">rpc-endpoint</span> <span class="pre">=</span> <span class="pre">0.0.0.0:11011</span></code> will open up
the RPC-port <cite>11011</cite> to connect a cli-wallet or web wallet to
it. With the <code class="docutils literal"><span class="pre">p2p-endpoint</span> <span class="pre">=</span> <span class="pre">0.0.0.0:11010</span></code> being accessible
from the internet, this node can be used as seed node.</p>
</div>
<div class="section" id="embedding-the-genesis-block-optional">
<h3>Embedding the Genesis block (optional)<a class="headerlink" href="3-init-blockchain.html#embedding-the-genesis-block-optional" title="Permalink to this headline">¶</a></h3>
<p>Now that we have the blockchain established and the used correct genesis
block, we can have it embedded into the binaries directly. For that
reasons we have moved it into the root directory and called it
<code class="docutils literal"><span class="pre">genesis.json</span></code> for the default compile toolchain to catch it
automatically. We recompile to include the genesis block with:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>make clean
find . -name <span class="s2">&quot;CMakeCache.txt&quot;</span> <span class="p">|</span> xargs rm -f
find . -name <span class="s2">&quot;CMakeFiles&quot;</span> <span class="p">|</span> xargs rm -Rf
cmake -DCMAKE_BUILD_TYPE<span class="o">=</span>Release .
</pre></div>
</div>
<p>Deleting caches will reset all <code class="docutils literal"><span class="pre">cmake</span></code> variables, so if you have used
instructions like <a class="reference internal" href="../installation/Build.html"><span class="doc">Building from Sources</span></a> which tells you to
set other <code class="docutils literal"><span class="pre">cmake</span></code> variables, you will have to add those variables
to the <code class="docutils literal"><span class="pre">cmake</span></code> line above.</p>
<p>Embedding the genesis copies the entire content of genesis block
into the <code class="docutils literal"><span class="pre">witness_node</span></code> binary, and additionally copies the chain ID
into the <code class="docutils literal"><span class="pre">cli_wallet</span></code> binary.  Embedded genesis allows the following
simplifications to the subsequent instructions:</p>
<ul class="simple">
<li>You need <strong>not</strong> specify the genesis file on the witness node command
line, or in the witness node configuration file.</li>
<li>You need <strong>not</strong> specify the chain ID on the <code class="docutils literal"><span class="pre">cli_wallet</span></code> command line
when starting a new wallet.</li>
</ul>
</div>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </body>
</html>